apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "shelf.fullname" . }}
data:
  config.toml: |
    [ui]
    oidc_configuration_url = "{{ .Values.security.oidcConfigUrl }}"
    
    [auth]
    audience = "{{ .Values.security.audience }}"
    issuer = "{{ .Values.security.issuer }}"
    {{- if eq .Values.persistence.packageStorage "s3" }}
    [s3]
    bucket = "{{ .Values.persistence.s3.bucket }}"
    host = "{{ .Values.persistence.s3.host }}"
    access_key = "{{ .Values.persistence.s3.accessKey }}"
    secret_key = "{{ .Values.persistence.s3.secretKey }}"
    region = "{{ .Values.persistence.s3.region }}"
    {{- end }}